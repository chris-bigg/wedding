---
import { weddingContent } from '../config/wedding-content';
---

<style>
	.video-fade-container {
		position: relative;
		overflow: hidden;
	}
	
	.video-fade-container {
		mask-image: linear-gradient(to bottom, black 70%, transparent 100%);
		-webkit-mask-image: linear-gradient(to bottom, black 70%, transparent 100%);
	}
	
	/* Fallback gradient overlay using ::after - matches card bg-white/70 */
	.video-fade-container::after {
		content: '';
		position: absolute;
		bottom: 0;
		left: 0;
		right: 0;
		height: 30%;
		background: linear-gradient(to bottom, transparent 0%, rgba(35, 33, 31, 0.7) 100%);
		pointer-events: none;
		z-index: 1;
	}
	
	/* Dark mode - matches card dark:bg-stone-800/70 (stone-800 = rgb(41, 37, 36)) */
	.dark .video-fade-container::after {
		background: linear-gradient(to bottom, transparent 0%, rgba(41, 37, 36, 0.7) 100%);
	}
</style>

<section id="details" class="py-20 px-4 bg-gradient-to-br from-green-50/50 to-stone-50 dark:from-stone-900/20 dark:to-stone-950/30">
	<div class="max-w-4xl mx-auto">
		<h2 class="text-5xl md:text-6xl text-center mb-12 overflow-visible" style="font-family: 'Mon de Tresor', serif; font-weight: 400; line-height: 1.3; padding: 0.5rem 0;" data-animate-title>
			<span class="inline-block bg-gradient-to-r from-green-800 to-green-950 dark:from-white dark:to-stone-200 bg-clip-text text-transparent px-4">
				Wedding Details
			</span>
		</h2>
		
		<div class="relative bg-white/70 dark:bg-stone-800/70 backdrop-blur-sm rounded-2xl shadow-lg border border-stone-200/50 dark:border-stone-700/50 overflow-hidden mb-8" data-animate-fade-up>
			{/* Video Background with fade-out effect */}
			<div class="video-fade-container absolute top-0 left-0 w-full h-96 md:h-[400px]">
				<video 
					src="/video/KH-Web-Header.mp4" 
					autoplay
					loop
					muted
					playsinline
					class="w-full h-full object-cover"
				>
					Your browser does not support the video tag.
				</video>
				{/* Dark filter overlay */}
				<div class="absolute inset-0 bg-black/40 z-0"></div>
			</div>

			{/* Content Overlay - Logo and Address - centered in video */}
			<div class="absolute top-0 left-0 w-full h-96 md:h-[400px] flex items-center justify-center z-10 px-8 md:px-12">
				<div class="text-center" data-animate-left>
					<img 
						src="/images/KH/Kings-Head-Logo-with-arch-1-wht-no-arch.png" 
						alt="Kings Head Hotel Cirencester"
						class="w-full h-auto mx-auto max-w-md drop-shadow-lg"
					/>
					<p class="text-lg text-white mt-4 drop-shadow-md">{weddingContent.venue.address}</p>
				</div>
			</div>

			{/* Schedule Content - only show confirmed times; TBC items stay in config for later */}
			<div class="relative z-10 px-8 md:px-12 pt-[30px] pb-8 md:pb-12">
				<h3 class="text-2xl font-medium text-green-950 dark:text-white mb-2 mt-0 text-center" data-animate-text>Schedule</h3>
				<p class="text-lg text-stone-600 dark:text-stone-400 text-center mb-6" data-animate-text>{weddingContent.date.full} at {weddingContent.date.time}</p>
				<div class="space-y-4" data-animate-stagger>
					{weddingContent.schedule.slice(0, 2).map((item) => (
						<div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-1 sm:gap-4 border-b border-green-800/40 dark:border-stone-200/30 pb-3" data-stagger-item>
							<span class="text-base sm:text-lg font-medium text-green-900 dark:text-white">{item.time}</span>
							<span class="text-base sm:text-lg text-stone-600 dark:text-stone-400">{item.event}</span>
						</div>
					))}
					<div class="relative">
						{/* Overlay banner - narrower, on top of the 3 blurred rows */}
						<div class="absolute left-1/2 top-0 -translate-x-1/2 z-10 flex justify-center px-2" aria-label="More timings to be confirmed">
							<div class="flex items-center justify-center gap-2 max-w-xs min-h-[7rem] border border-dashed border-green-700/50 dark:border-stone-500/50 rounded-xl bg-green-50/90 dark:bg-stone-800/90 backdrop-blur-sm shadow-md px-4 py-5">
								<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-700 dark:text-stone-400 shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
								</svg>
								<p class="text-xs sm:text-sm text-stone-600 dark:text-stone-400 text-center m-0 leading-snug">Reception & evening timings to follow â€” we'll share the full run of the day closer to the date.</p>
							</div>
						</div>
						<div class="space-y-4">
							{weddingContent.schedule.slice(2, 5).map((item, index) => {
								const fadeClasses = ["opacity-85 blur-[1px]", "opacity-65 blur-[2px]", "opacity-45 blur-[3px]"][index];
								return (
									<div
										class={`flex flex-col sm:flex-row sm:justify-between sm:items-center gap-1 sm:gap-4 border-b border-green-800/40 dark:border-stone-200/30 pb-3 select-none ${fadeClasses}`}
										data-stagger-item
									>
										<span class="text-base sm:text-lg font-medium text-green-900 dark:text-white">{item.time}</span>
										<span class="text-base sm:text-lg text-stone-600 dark:text-stone-400">{item.event}</span>
									</div>
								);
							})}
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>
